<!doctype html>
<html>

<head>
    <title>I|B</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Lancelot" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
</head>

<body>
    <!-- INTRO PAGE -->
    <!-- <div id='intro-page'>
        <transition name="fade" v-if="show">
            <div id='intro'>
                <div id="intro-info">
                    <p id="intro-name">IMAGE | DOOR</p>
                    <div id='intro-button-div'>
                        <button id="enter-button" v-on:click="show = !show">enter</button>
                    </div>
                </div>
            </div>
        </transition>
    </div> -->

    <!-- MAIN ELEMENT STARTS - HAS ACCESS TO VUE LOGIC IN SCRIPT.JS -->
    <div id="main">
        <header>
            <p id="title"> IMAGE | DOOR </p>
        </header>

        <hr class='hr-in-form'>

        <!-- FORM - INPUT FIELDS -->
        <form>
            <!-- v-model binds the value in this specific field to form.title  -->
            <input v-model='form.title' type="text" placeholder="title" name="title">
            <input v-model='form.description' type="text" placeholder="description" name="description">
            <input v-model='form.username' type="text" placeholder="username" name="username">
            <!-- Must have name & type = file an accept=image/* means that file must be an img-->
            <input name='file' type="file" accept="image/*" @change='handleFileChange'>
            <button class='upload-button' @click='uploadFile'>Upload</button>
        </form>

        <hr class='hr-in-form'>

        <!--  IMAGES AND TITLE -->
        <div class='all-images'>
            <div class='image-div' v-for='item in images'>
                <a :href=" '#' + item.id">
                    <img :src='item.url' :id='item.id'>
                    <div id='item-text'>
                        <p id='image-title'>{{ item.title }}</p>
                    </div>
                </a>
            </div>
        </div>

        <!-- MORE BUTTON -->
        <div id='more-button-div'>
            <button id='more-button' @click='getMoreImages' v-if='morePics'>More</button>
        </div>

        <!-- This renders the modal on the page. CSS makes it look like an actual modal -->
        <image-modal :image-id='imageId' v-if='imageId' @close-component='closingTheComponent'>
        </image-modal>
        <!--orange is component, green is vue instance  -->

    </div>
    <!-- main div ends  -->

    <!-- Logic of Vue component must be after #main div (Vue instance). Must have an ID property and a specific type attribute -->
    <script id='my-template' type='text/x-template'>
        <div id='overlay'>
            <div id='modal'>
                <h1 id='text-in-modal'>{{ title }} </h1>
                <div class='img-arrow-container'>
                    <a class='a-modal' :href="'#' + nextId" v-if='nextId'>
                        <p class='arrow left'> < </p>
                    </a>
                    <img id='img-in-modal' :src='url' @click='closeComponent'>
                    <a class='a-modal' :href="'#' + prevId" v-if='prevId'>
                        <p class='arrow right'> > </p>
                    </a>
                </div>
                <p id='text-in-modal'>description: {{ description }}</p>
                <p id='text-in-modal'>uploaded by {{ username }}</p>

                <!-- COMMENTS MODAL -->
                <form>
                    <hr id='hr-in-modal'>
                    <p>Comment
                        <input v-model='form.comment' type='text' placeholder='insert your comment' name='comment'>
                    </p>
                    <p>Username
                        <input v-model='form.modalUser' type='text' placeholder='username' name='modalUser'>
                    </p>
                    <!--Submit Comment  -->
                    <button class='submit-in-modal' @click='insertComment'>Submit</button>
                    <button class='delete-in-modal' @click='deleteImage'>Delete</button>

                </form>
                <!-- RENDERS COMMENTS IN HTML -->
                <div id='comment-container' v-if='exists'>
                    <div id='comments-in-modal' v-for = 'each in comments'>
                        <p id='each-comment'>{{ each.comment }} | posted by {{ each.modaluser}} on {{each.added}}</p>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <!-- Linking Vue, Axios, and JS files -->
    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>

</html>